<!-- transformation-note: left upstream numbering of headings for verification -->
## 4.7 Topic Names and Topic Filters

<!-- transformation-note: left upstream numbering of headings for verification -->
### 4.7.1 Topic Wildcards

The topic level separator is used to introduce structure into the Topic Name. If present, it divides the Topic Name into multiple "topic levels".

A subscription's Topic Filter can contain special wildcard characters, which allow a Client to subscribe to multiple topics at once.

\[The wildcard characters can be used in Topic Filters, but MUST NOT be used within a Topic Name] \[MQTT-SN-4.7.1-1].

<!-- transformation-note: left upstream numbering of headings for verification -->
#### 4.7.1.1 Topic Level Separator

The forward slash ('/' U+002F) is used to separate each level within a topic tree and provide a hierarchical structure to the Topic Names. The use of
the topic level separator is significant when either of the two wildcard characters is encountered in Topic Filters specified by subscribing Clients.
Topic level separators can appear anywhere in a Topic Filter or Topic Name. Adjacent Topic level separators indicate a zero-length topic level.

<!-- transformation-note: left upstream numbering of headings for verification -->
#### 4.7.1.2 Multi-level Wildcard

The number sign ('#' U+0023) is a wildcard character that matches any number of levels within a topic. The multi-level wildcard represents the parent
and any number of child levels. \[The multi-level wildcard character MUST be specified either on its own or following a topic level separator. In
either case it MUST be the last character specified in the Topic Filter] \[MQTT-SN-4.7.1.2-1].

> **Informative comment**
>
> For example, if a Client subscribes to "sport/tennis/player1/#", it would receive Application Messages published using these Topic Names:
>
>- "sport/tennis/player1"
>- "sport/tennis/player1/ranking
>- "sport/tennis/player1/score/wimbledon"

> **Informative comment**
>
>- "sport/#" also matches the singular "sport", since # includes the parent level.
>- "#" is valid and will receive every Application Message
>- "sport/tennis/#" is valid
>- "sport/tennis#" is not valid
>- "sport/tennis/#/ranking" is not valid

<!-- transformation-note: left upstream numbering of headings for verification -->
#### 4.7.1.3 Single-level Wildcard

The plus sign ('+' U+002B) is a wildcard character that matches only one topic level.

\[The single-level wildcard can be used at any level in the Topic Filter, including first and last levels. Where it is used, it MUST occupy an entire
level of the filter] \[MQTT-SN-4.7.1.3-1]. It can be used at more than one level in the Topic Filter and can be used in conjunction with the
multi-level wildcard.

> **Informative comment**
>
> For example, "sport/tennis/+" matches "sport/tennis/player1" and "sport/tennis/player2", but not "sport/tennis/player1/ranking". Also, because the
> single-level wildcard matches only a single level, "sport/+" does not match "sport" but it does match "sport/".
>
>- "+" is valid
>- "+/tennis/#" is valid
>- "sport+" is not valid
>- "sport/+/player1" is valid
>- "/finance" matches "+/+" and "/+", but not "+"

<!-- transformation-note: left upstream numbering of headings for verification -->
### 4.7.2 Topcis Beginning with ${#topics-beginning-with-dollar}

\[The Server MUST NOT match Topic Filters starting with a wildcard character (# or +) with Topic Names beginning with a $ character]
\[MQTT-SN-4.7.2-1]. The Server SHOULD prevent Clients from using such Topic Names to exchange messages with other Clients. Server implementations MAY
use Topic Names that start with a leading $ character for other purposes.

> **Informative comment**
>
>- $SYS/ has been widely adopted as a prefix to topics that contain Server-specific information or control APIs
>- Applications cannot use a topic with a leading $ character for their own purposes

> **Informative comment**
>
>- A subscription to "#" will not receive any messages published to a topic beginning with a $
>- A subscription to "+/monitor/Clients" will not receive any messages published to "$SYS/monitor/Clients"
>- A subscription to "$SYS/#" will receive messages published to topics beginning with "$SYS/"
>- A subscription to "$SYS/monitor/+" will receive messages published to "$SYS/monitor/Clients"
>- For a Client to receive messages from topics that begin with $SYS/ and from topics that don't begin with a $, it has to subscribe to both "#"
>  and "$SYS/#"

<!-- transformation-note: left upstream numbering of headings for verification -->
### 4.7.3 Topic Semantic and Usage

The following rules apply to Topic Names and Topic Filters:

- \[All Topic Names and Topic Filters MUST be at least one character long] \[MQTT-SN-4.7.3-1]
- Topic Names and Topic Filters are case sensitive
- Topic Names and Topic Filters can include the space character
- A leading or trailing '/' creates a distinct Topic Name or Topic Filter
- A Topic Name or Topic Filter consisting only of the '/' character is valid
- \[Topic Names and Topic Filters MUST NOT include the null character (Unicode U+0000)]
  [Unicode MQTT 5.0 ref?](https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#Unicode) \[MQTT-SN-4.7.3-2]
- \[Topic Names and Topic Filters are UTF-8 Encoded Strings; they MUST NOT encode to more than 65,535 bytes] \[MQTT-SN-4.7.3-4]. Refer to
  section [1.7.4 "UTF-8 Encoded String"](#utf-8-encoded-string).

There is no limit to the number of levels in a Topic Name or Topic Filter, other than that imposed by the overall length of a UTF-8 Encoded String.

\[When it performs subscription matching the Server MUST NOT perform any normalization of Topic Names or Topic Filters, or any modification or
substitution of unrecognized characters] \[MQTT-SN-4.7.3-4]. Each non-wildcarded level in the Topic Filter has to match the corresponding
level in the Topic Name character for character for the match to succeed.

>**Informative comment**
>
> The UTF-8 encoding rules mean that the comparison of Topic Filter and Topic Name could be performed either by comparing the encoded UTF-8 bytes, or
> by comparing decoded Unicode characters.

>**Informative comment**
>
>- "ACCOUNTS" and "Accounts" are two different Topic Names
>- "Accounts payable" is a valid Topic Name
>- "/finance" is different from "finance"

An Application Message is sent to each Client Subscription whose Topic Filter matches the Topic Name attached to an Application Message. The topic
resource MAY be either predefined in the Server by an administrator or it MAY be dynamically created by the Server when it receives the first
subscription or an Application Message with that Topic Name. The Server MAY also use a security component to authorize particular actions on the topic
resource for a given Client.
